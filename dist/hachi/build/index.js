"use strict";exports.__esModule=true;exports.default=build;var _config=_interopRequireDefault(require("../server/config"));var _utils=require("./utils");var _entries=require("./entries");var _webpackConfig=_interopRequireDefault(require("./webpack-config"));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}async function build(dir){const config=(0,_config.default)(dir);const pagesMapDir=(0,_utils.findPagesMapDir)(dir);const mappedPages=await(0,_utils.collectPages)(pagesMapDir);const entrypoints=(0,_entries.createEntrypoints)(false,mappedPages,'server',config);console.log('entrypoints',entrypoints);const webpackConfigs=await Promise.all([(0,_webpackConfig.default)(dir,{config,target:'server',entrypoints}),(0,_webpackConfig.default)(dir,{config,target:'client',entrypoints})]);console.log('webpackConfigs',webpackConfigs);}