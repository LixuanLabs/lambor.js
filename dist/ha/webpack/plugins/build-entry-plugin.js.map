{"version":3,"sources":["build-entry-plugin.js"],"names":["BuildManifestPlugin","apply","compiler","hooks","emit","tapAsync","compilation","callback","assetMap","default","urlKey","entrypoint","entrypoints","entries","console","log","chunks","getFiles","file","push","publicPath","assets","ENTRY_FILES","RawSource","JSON","stringify"],"mappings":"4DAAA,+CACA,8CAEe,KAAMA,CAAAA,mBAAoB,CACrCC,KAAK,CAACC,QAAD,CAAW,CACZA,QAAQ,CAACC,KAAT,CAAeC,IAAf,CAAoBC,QAApB,CACI,cADJ,CAEI,CAACC,WAAD,CAAcC,QAAd,GAA2B,CACvB,KAAMC,CAAAA,QAAQ,CAAG,CACbC,OAAO,CAAE,EADI,CAAjB,CAIA,IAAK,KAAM,CAACC,MAAD,CAASC,UAAT,CAAX,EAAmCL,CAAAA,WAAW,CAACM,WAAZ,CAAwBC,OAAxB,EAAnC,CAAsE,CAClEC,OAAO,CAACC,GAAR,CAAY,QAAZ,CAAsBL,MAAtB,CAA8BC,UAAU,CAACK,MAAzC,EACAF,OAAO,CAACC,GAAR,CAAY,uBAAZ,CAAqCJ,UAAU,CAACM,QAAX,EAArC,EACA,IAAK,KAAMC,CAAAA,IAAX,GAAmBP,CAAAA,UAAU,CAACM,QAAX,EAAnB,CAA0C,CACtCT,QAAQ,CAACC,OAAT,CAAiBU,IAAjB,CAAsB,CAClBC,UAAU,CAAG,SAAQF,IAAK,EADR,CAAtB,EAGJ;AACA;AACA;AACA;AACA;AACA;AAEA;AACC,CACJ,CACDZ,WAAW,CAACe,MAAZ,CAAmBC,sBAAnB,EAAkC,GAAIC,0BAAJ,CAC9BC,IAAI,CAACC,SAAL,CAAejB,QAAf,CAAyB,IAAzB,CAA+B,CAA/B,CAD8B,CAAlC,CAGAD,QAAQ,GACX,CA5BL,EA8BH,CAhCoC,C","sourcesContent":["import { RawSource } from 'webpack-sources'\nimport { ENTRY_FILES } from '../../lib/constants';\n\nexport default class BuildManifestPlugin {\n    apply(compiler) {\n        compiler.hooks.emit.tapAsync(\n            'HaEntryFiles',\n            (compilation, callback) => {\n                const assetMap = {\n                    default: []\n                };\n\n                for (const [urlKey, entrypoint] of compilation.entrypoints.entries()) {\n                    console.log('urlKey', urlKey, entrypoint.chunks);\n                    console.log('entrypoint.getFiles()', entrypoint.getFiles());\n                    for (const file of entrypoint.getFiles()) {\n                        assetMap.default.push({\n                            publicPath: `/dist/${file}`\n                        })    \n                    //     if (/\\.map$/.test(file) || /\\.hot-update\\.js$/.test(file)) {\n                    //     continue\n                    //     }\n                    //     if (!/\\.js$/.test(file) && !/\\.css$/.test(file)) {\n                    //     continue\n                    //     }\n\n                    //     pageManifest[urlKey] = file\n                    }\n                }\n                compilation.assets[ENTRY_FILES] = new RawSource(\n                    JSON.stringify(assetMap, null, 2)\n                )\n                callback();\n            }\n        )\n    }\n}"]}