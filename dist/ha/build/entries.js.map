{"version":3,"sources":["entries.js"],"names":["createPagesMapping","pagePaths","extensions","previousPages","pages","reduce","result","pagePath","page","replace","RegExp","join","pageKey","warn","chalk","cyan","PAGES_DIR_ALIAS","createEntrypoints","dev","dynamicEntry","client","__dirname","server"],"mappings":"+HAAA,oDACA,0BACA,wCACA,2CACA,6D,mFAGO,QAASA,CAAAA,kBAAT,CACLC,SADK,CAELC,UAFK,CAGL,CACA,KAAMC,CAAAA,aAAa,CAAG,EAAtB,CACA,KAAMC,CAAAA,KAAK,CAAGH,SAAS,CAACI,MAAV,CACZ,CAACC,MAAD,CAASC,QAAT,GAAsB,CACpB,GAAIC,CAAAA,IAAI,CAAI,GAAED,QAAQ,CACnBE,OADW,CACH,GAAIC,CAAAA,MAAJ,CAAY,QAAOR,UAAU,CAACS,IAAX,CAAgB,GAAhB,CAAqB,IAAxC,CADG,CAC2C,EAD3C,EAEXF,OAFW,CAEH,KAFG,CAEI,GAFJ,CAES,EAFZ,CAEcA,OAFd,CAEsB,UAFtB,CAEkC,EAFlC,CAAX,CAGAD,IAAI,CAAGA,IAAI,GAAK,QAAT,CAAoB,GAApB,CAA0BA,IAAjC,CAEA,KAAMI,CAAAA,OAAO,CAAGJ,IAAI,GAAK,EAAT,CAAc,GAAd,CAAoBA,IAApC,CAEA,GAAII,OAAO,GAAIN,CAAAA,MAAf,CAAuB,CACrBO,IAAI,CACD,4BAA2BC,eAAMC,IAAN,CAC1B,eAAK,OAAL,CAAcZ,aAAa,CAACS,OAAD,CAA3B,CAD0B,CAE1B,QAAOE,eAAMC,IAAN,CACP,eAAK,OAAL,CAAcR,QAAd,CADO,CAEP,oBAAmBO,eAAMC,IAAN,CAAWH,OAAX,CAAoB,GALvC,CAAJ,CAOD,CARD,IAQO,CACLT,aAAa,CAACS,OAAD,CAAb,CAAyBL,QAAzB,CACD,CACDD,MAAM,CAACM,OAAD,CAAN,CAAkB,eAAKI,0BAAL,CAAsBT,QAAtB,EAAgCE,OAAhC,CAAwC,KAAxC,CAA+C,GAA/C,CAAlB,CACA,MAAOH,CAAAA,MAAP,CACD,CAtBW,CAuBZ,EAvBY,CAAd,CA0BAF,KAAK,CAAC,OAAD,CAAL,CAAiBA,KAAK,CAAC,OAAD,CAAL,EAAkB,sBAAnC,CACAA,KAAK,CAAC,SAAD,CAAL,CAAmBA,KAAK,CAAC,SAAD,CAAL,EAAoB,wBAAvC,CACAA,KAAK,CAAC,YAAD,CAAL,CAAsBA,KAAK,CAAC,YAAD,CAAL,EAAuB,2BAA7C,CAEA,MAAOA,CAAAA,KAAP,CACD,CAEM,QAASa,CAAAA,iBAAT,CAA2B,CAACC,GAAD,CAA3B,CAAkC,CACvC,KAAMC,CAAAA,YAAY,CAAG,EAArB,CACA;AACA;AACA;AACA;AACA;AACA,GAAID,GAAJ,CAAS,CACP,MAAO,CACLE,MAAM,CAAE,CAAC,eAAKC,SAAL,CAAgB,oBAAhB,CAAD,CADH,CAELC,MAAM,CAAE,CACNA,MAAM,CAAE,eAAKD,SAAL,CAAgB,kBAAhB,CADF,CAEN,GAAGF,YAFG,CAFH,CAAP,CAOD,CAED,MAAO,CACLC,MAAM,CAAE,CACNA,MAAM,CAAE,CAAC,eAAKC,SAAL,CAAgB,oBAAhB,CAAD,CADF,CADH,CAILC,MAAM,CAAE,CACNA,MAAM,CAAE,eAAKD,SAAL,CAAgB,kBAAhB,CADF,CAEN,GAAGF,YAFG,CAJH,CAAP,CASD","sourcesContent":["import chalk from 'chalk'\nimport { join } from 'path'\nimport { stringify } from 'querystring'\nimport { API_ROUTE, DOT_NEXT_ALIAS, PAGES_DIR_ALIAS, BLOCKED_PAGES_REG } from '../lib/constants'\nimport { normalizePagePath } from '../lib/normalize-page-path';\n\n\nexport function createPagesMapping(\n  pagePaths,\n  extensions\n) {\n  const previousPages = {}\n  const pages = pagePaths.reduce(\n    (result, pagePath) => {\n      let page = `${pagePath\n        .replace(new RegExp(`\\\\.+(${extensions.join('|')})$`), '')\n        .replace(/\\\\/g, '/')}`.replace(/\\/index$/, '')\n      page = page === '/index' ? '/' : page\n\n      const pageKey = page === '' ? '/' : page\n\n      if (pageKey in result) {\n        warn(\n          `Duplicate page detected. ${chalk.cyan(\n            join('pages', previousPages[pageKey])\n          )} and ${chalk.cyan(\n            join('pages', pagePath)\n          )} both resolve to ${chalk.cyan(pageKey)}.`\n        )\n      } else {\n        previousPages[pageKey] = pagePath\n      }\n      result[pageKey] = join(PAGES_DIR_ALIAS, pagePath).replace(/\\\\/g, '/')\n      return result\n    },\n    {}\n  )\n\n  pages['/_app'] = pages['/_app'] || 'next/dist/pages/_app'\n  pages['/_error'] = pages['/_error'] || 'next/dist/pages/_error'\n  pages['/_document'] = pages['/_document'] || 'next/dist/pages/_document'\n\n  return pages\n}\n\nexport function createEntrypoints({dev}) {\n  const dynamicEntry = {};\n  // for (const url in mappedPages) {\n  //   if (BLOCKED_PAGES_REG.test(url)) {\n  //     dynamicEntry[url] = mappedPages[url];\n  //   }\n  // }\n  if (dev) {\n    return {\n      client: [join(__dirname, '../client/index.js')],\n      server: {\n        server: join(__dirname, '../server/ssr.js'),\n        ...dynamicEntry\n      }\n    }\n  }\n  \n  return {\n    client: {\n      client: [join(__dirname, '../client/index.js')]\n    },\n    server: {\n      server: join(__dirname, '../server/ssr.js'),\n      ...dynamicEntry\n    }\n  }\n}\n"]}