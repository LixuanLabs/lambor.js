{"version":3,"sources":["start-server.js"],"names":["start","serverOptions","port","hostname","app","Controller","init","customServer","preload","srv","http","createServer","handleRequest","Promise","resolve","reject","on","listen"],"mappings":"2DAAA,kDACA,gE,mFAEe,cAAeA,CAAAA,KAAf,CACbC,aADa,CAEbC,IAFa,CAGbC,QAHa,CAIb,CACA,KAAMC,CAAAA,GAAG,CAAG,GAAIC,oBAAJ,EAAZ,CACA,KAAMD,CAAAA,GAAG,CAACE,IAAJ,CAAS,CACb,GAAGL,aADU,CAEbM,YAAY,CAAE,KAFD,CAAT,CAAN,CAIA,KAAMH,CAAAA,GAAG,CAACI,OAAJ,EAAN,CACA,KAAMC,CAAAA,GAAG,CAAGC,cAAKC,YAAL,CAAkBP,GAAG,CAACQ,aAAtB,CAAZ,CACA,KAAM,IAAIC,CAAAA,OAAJ,CAAY,CAACC,OAAD,CAAUC,MAAV,GAAqB,CACrC;AACAN,GAAG,CAACO,EAAJ,CAAO,OAAP,CAAgBD,MAAhB,EACAN,GAAG,CAACO,EAAJ,CAAO,WAAP,CAAoB,IAAMF,OAAO,EAAjC,EACAL,GAAG,CAACQ,MAAJ,CAAWf,IAAX,CAAiBC,QAAjB,EACD,CALK,CAAN,CAMA;AACA;AACA,MAAOC,CAAAA,GAAP,CACD","sourcesContent":["import http from 'http';\nimport Controller from './controller';\n\nexport default async function start(\n  serverOptions,\n  port,\n  hostname\n) {\n  const app = new Controller()\n  await app.init({\n    ...serverOptions,\n    customServer: false,\n  });\n  await app.preload();\n  const srv = http.createServer(app.handleRequest)\n  await new Promise((resolve, reject) => {\n    // This code catches EADDRINUSE error if the port is already in use\n    srv.on('error', reject)\n    srv.on('listening', () => resolve())\n    srv.listen(port, hostname)\n  })\n  // It's up to caller to run `app.prepare()`, so it can notify that the server\n  // is listening before starting any intensive operations.\n  return app\n}\n"]}