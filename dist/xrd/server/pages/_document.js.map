{"version":3,"sources":["_document.jsx"],"names":["ESCAPE_LOOKUP","ESCAPE_REGEX","htmlEscapeJsonString","str","replace","match","DocumentComponentContext","React","createContext","middleware","req","res","dedupe","bundles","files","Set","kept","bundle","has","file","add","push","Document","Component","getInitialProps","ctx","enhanceApp","App","props","html","head","renderPage","styles","renderDocument","_documentProps","_devOnlyInvalidateCacheQueryString","process","env","NODE_ENV","Date","now","render","Html","htmlProps","context","contextType","propTypes","children","PropTypes","node","isRequired","Head","getCssLinks","cssFiles","length","filter","f","test","cssLinkElements","forEach","nonce","encodeURI","crossOrigin","assetPrefix","page","headTags","unstable_runtimeJS","disableRuntimeJS","Children","map","child","isReactHelmet","type","console","warn","hasAmphtmlRel","hasCanonicalRel","rel","curStyles","Array","isArray","isDevelopment","__html","count","toString","createElement","Fragment","string","Main","HaScript","getScripts","normalScripts","publicPath","endsWith","from","PRELOADED_STATE","preloadedState","JSON","stringify","encodeURIComponent","safariNomoduleFix","getPageFile","buildId","startingUrl"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types'\nimport React, { Component } from 'react'\n\nconst ESCAPE_LOOKUP = {\n  '&': '\\\\u0026',\n  '>': '\\\\u003e',\n  '<': '\\\\u003c',\n  '\\u2028': '\\\\u2028',\n  '\\u2029': '\\\\u2029',\n}\n\nconst ESCAPE_REGEX = /[&><\\u2028\\u2029]/g\n\nexport function htmlEscapeJsonString(str) {\n  return str.replace(ESCAPE_REGEX, (match) => ESCAPE_LOOKUP[match])\n}\n\nexport const DocumentComponentContext = React.createContext()\n\n\nexport async function middleware({ req, res }) {}\n\nfunction dedupe(bundles) {\n  const files = new Set()\n  const kept = []\n\n  for (const bundle of bundles) {\n    if (files.has(bundle.file)) continue\n    files.add(bundle.file)\n    kept.push(bundle)\n  }\n  return kept\n}\n\n/**\n * `Document` component handles the initial `document` markup and renders only on the server side.\n * Commonly used for implementing server side rendering for `css-in-js` libraries.\n */\nexport default class Document extends Component {\n  /**\n   * `getInitialProps` hook returns the context object with the addition of `renderPage`.\n   * `renderPage` callback executes `React` rendering logic synchronously to support server-rendering wrappers\n   */\n  static async getInitialProps(\n    ctx\n  ){\n    const enhanceApp = (App) => {\n      return (props) => <App {...props} />\n    }\n\n    const { html, head } = await ctx.renderPage({ enhanceApp })\n    const styles = []\n    return { html, head, styles }\n  }\n\n  static renderDocument(\n    Document,\n    props\n  ) {\n    return (\n      <DocumentComponentContext.Provider\n        value={{\n          _documentProps: props,\n          // In dev we invalidate the cache by appending a timestamp to the resource URL.\n          // This is a workaround to fix https://github.com/zeit/ha.js/issues/5860\n          // TODO: remove this workaround when https://bugs.webkit.org/show_bug.cgi?id=187726 is fixed.\n          _devOnlyInvalidateCacheQueryString:\n            process.env.NODE_ENV !== 'production' ? '?ts=' + Date.now() : '',\n        }}\n      >\n        <Document {...props} />\n      </DocumentComponentContext.Provider>\n    )\n  }\n\n  render() {\n    return (\n        <Html>\n          <Head />\n          <body>\n            <Main />\n            <HaScript />\n          </body>\n        </Html>\n    )\n  }\n}\n\nexport class Html extends Component {\n  static contextType = DocumentComponentContext\n\n  static propTypes = {\n    children: PropTypes.node.isRequired,\n  }\n\n  render() {\n    const { htmlProps } = this.context._documentProps\n    return (\n      <html\n        {...htmlProps}\n        {...this.props}\n      />\n    )\n  }\n}\n\nexport class Head extends Component {\n  static contextType = DocumentComponentContext\n\n  static propTypes = {\n    nonce: PropTypes.string,\n    crossOrigin: PropTypes.string,\n  }\n\n\n  getCssLinks() {\n    const { files } = this.context._documentProps\n    const cssFiles =\n      files && files.length ? files.filter((f) => /\\.css$/.test(f)) : []\n\n    const cssLinkElements = []\n    cssFiles.forEach((file) => {\n      cssLinkElements.push(\n        <link\n          key={`${file}-preload`}\n          nonce={this.props.nonce}\n          rel=\"preload\"\n          href={`${encodeURI(\n            file\n          )}`}\n          as=\"style\"\n          crossOrigin={this.props.crossOrigin || process.crossOrigin}\n        />,\n        <link\n          key={file}\n          nonce={this.props.nonce}\n          rel=\"stylesheet\"\n          href={`${encodeURI(\n            file\n          )}`}\n          crossOrigin={this.props.crossOrigin || process.crossOrigin}\n        />\n      )\n    })\n\n    return cssLinkElements.length === 0 ? null : cssLinkElements\n  }\n\n  render() {\n    const {\n      styles,\n      assetPrefix,\n      page,\n      headTags,\n      unstable_runtimeJS,\n    } = this.context._documentProps\n    const disableRuntimeJS = unstable_runtimeJS === false\n    const { _devOnlyInvalidateCacheQueryString } = this.context\n\n    let { head } = this.context._documentProps\n    let children = this.props.children\n    // show a warning if Head contains <title> (only in development)\n    if (process.env.NODE_ENV !== 'production') {\n      children = React.Children.map(children, (child) => {\n        const isReactHelmet = child?.props?.['data-react-helmet']\n        if (child?.type === 'title' && !isReactHelmet) {\n          console.warn(\n            \"Warning: <title> should not be used in _document.js's <Head>. https://err.sh/ha.js/no-document-title\"\n          )\n        }\n        return child\n      })\n      if (this.props.crossOrigin)\n        console.warn(\n          'Warning: `Head` attribute `crossOrigin` is deprecated. https://err.sh/ha.js/doc-crossorigin-deprecated'\n        )\n    }\n\n    let hasAmphtmlRel = false\n    let hasCanonicalRel = false\n\n    // show warning and remove conflicting amp head tags\n    head = React.Children.map(head || [], (child) => {\n      if (!child) return child\n      const { type, props } = child\n\n      // non-amp mode\n      if (type === 'link' && props.rel === 'amphtml') {\n        hasAmphtmlRel = true\n      }\n      return child\n    })\n\n    // try to parse styles from fragment for backwards compat\n    const curStyles = Array.isArray(styles)\n      ? (styles)\n      : []\n\n    return (\n      <head {...this.props}>\n        {this.context._documentProps.isDevelopment && (\n          <>\n            <style\n              data-next-hide-fouc\n              dangerouslySetInnerHTML={{\n                __html: `body{display:none}`,\n              }}\n            />\n            <noscript\n              data-next-hide-fouc\n            >\n              <style\n                dangerouslySetInnerHTML={{\n                  __html: `body{display:block}`,\n                }}\n              />\n            </noscript>\n          </>\n        )}\n        {children}\n        {head}\n        <meta\n          name=\"next-head-count\"\n          content={React.Children.count(head || []).toString()}\n        />\n          {this.getCssLinks()}\n          {this.context._documentProps.isDevelopment && (\n            // this element is used to mount development styles so the\n            // ordering matches production\n            // (by default, style-loader injects at the bottom of <head />)\n            <noscript id=\"__next_css__DO_NOT_USE__\" />\n          )}\n          {styles || null}\n        {React.createElement(React.Fragment, {}, ...(headTags || []))}\n      </head>\n    )\n  }\n}\n\nexport class Main extends Component {\n  static contextType = DocumentComponentContext\n\n  render() {\n    const { children } = this.context._documentProps\n    return <div id=\"__ha\" dangerouslySetInnerHTML={{__html: children}} />;\n  }\n}\n\nexport class HaScript extends Component {\n  static contextType = DocumentComponentContext\n\n  static propTypes = {\n    nonce: PropTypes.string,\n    crossOrigin: PropTypes.string,\n  }\n\n  // Source: https://gist.github.com/samthor/64b114e4a4f539915a95b91ffd340acc\n  static safariNomoduleFix =\n    '!function(){var e=document,t=e.createElement(\"script\");if(!(\"noModule\"in t)&&\"onbeforeload\"in t){var n=!1;e.addEventListener(\"beforeload\",function(e){if(e.target===t)n=!0;else if(!e.target.hasAttribute(\"nomodule\")||!n)return;e.preventDefault()},!0),t.type=\"module\",t.src=\".\",e.head.appendChild(t),t.remove()}}();'\n\n  getScripts() {\n    const { files } = this.context._documentProps\n    \n    const normalScripts = files.filter((file) => file && file.publicPath.endsWith('.js')).map(file => file.publicPath);\n    \n    return Array.from(new Set(normalScripts)).map((publicPath) => {\n      return (\n        <script\n          key={publicPath}\n          src={`${encodeURI(\n            publicPath\n          )}`}\n          nonce={this.props.nonce}\n          crossOrigin={this.props.crossOrigin || process.crossOrigin}\n        />\n      )\n    })\n  }\n\n  render() {\n    const { PRELOADED_STATE } = this.context._documentProps;\n    const preloadedState = JSON.stringify(encodeURIComponent(JSON.stringify(PRELOADED_STATE || {})))\n    if (process.env.NODE_ENV !== 'production') {\n      if (this.props.crossOrigin)\n        console.warn(\n          'Warning: `HaScript` attribute `crossOrigin` is deprecated. https://err.sh/ha.js/doc-crossorigin-deprecated'\n        )\n    }\n\n\n    return (\n      <>\n        <script\n          nonce={this.props.nonce}\n          crossOrigin={this.props.crossOrigin || process.crossOrigin}\n          noModule={true}\n          dangerouslySetInnerHTML={{\n            __html: HaScript.safariNomoduleFix,\n          }}\n        />\n        <script\n          nonce={this.props.nonce}\n          crossOrigin={this.props.crossOrigin || process.crossOrigin}\n          dangerouslySetInnerHTML={{\n            __html: 'var __PRELOADED_STATE__ =' + preloadedState\n          }}\n        />\n        {this.getScripts()}\n      </>\n    )\n  }\n}\n\nfunction getPageFile(page, buildId) {\n  const startingUrl = page === '/' ? '/index' : page\n  return buildId ? `${startingUrl}.${buildId}.js` : `${startingUrl}.js`\n}\n"]}